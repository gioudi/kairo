/*! For license information please see despachos.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.kairosv2=t():e.kairosv2=t()}(self,(function(){return(()=>{"use strict";var e={"./Scripts/Core/Page.ts":(e,t,o)=>{var a=o("./node_modules/jquery/dist/jquery.js");Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var r=o("./node_modules/dayjs/dayjs.min.js"),n=o("./Scripts/Shared/Utils/index.ts");o("./node_modules/dayjs/locale/es-do.js");var s=o("./Scripts/Shared/Models/ActionsPermission.ts"),i=o("./Scripts/Shared/index.ts"),c=o("./node_modules/dayjs/plugin/customParseFormat.js"),l=function(){function e(){r.locale("es-do"),r.extend(c),this.AdjustValidation()}return e.prototype.RegisterMasks=function(e){this.MaskManager||(this.MaskManager=new n.MaskFormatsManager),this.MaskManager.RegisterMasks(e)},e.prototype.GetPermissions=function(e){var t=this;(new i.HttpFetchService).Post(e,"",!0).then((function(e){e&&(t.Permisions=e)})).catch((function(e){t.Permisions=new s.ActionsPermission}))},e.prototype.Destroy=function(){var e;null===(e=this.MaskManager)||void 0===e||e.Destroy()},e.prototype.AdjustValidation=function(){a.validator.methods.range=function(e,t,o){var a=e.replace(",","");return this.optional(t)||a>=o[0]&&a<=o[1]}},e}();t.Page=l},"./Scripts/Pages/Despachos/Despachos.ts":function(e,t,o){var a,r=o("./node_modules/jquery/dist/jquery.js"),n=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__awaiter||function(e,t,o,a){return new(o||(o=Promise))((function(r,n){function s(e){try{c(a.next(e))}catch(e){n(e)}}function i(e){try{c(a.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var o,a,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(n){return function(i){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,a=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],a=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DespachosPage=void 0;var c=o("./Scripts/Shared/index.ts"),l=o("./Scripts/Shared/Components/ConfirmModalMessage.ts"),d=o("./Scripts/Shared/Components/ConfigureDataTable.ts"),u=o("./Scripts/Pages/Despachos/GestionDespachos.ts"),p=o("./Scripts/Shared/Utils/SelectorMenu.ts"),h=o("./Scripts/Shared/Utils/MaskFormats.ts"),m=o("./Scripts/Shared/Components/DatepickerComponent.ts"),f=o("./node_modules/dayjs/dayjs.min.js");o("./node_modules/select2/dist/js/select2.js"),o("./node_modules/select2/dist/css/select2.css");var v=function(e){function t(){var t=e.call(this)||this;return t._baseUrl="/Despachos",t._arrayCompañias=[],t.FormattFields(),t._httpService=new c.HttpFetchService,t.Init(),t}return n(t,e),t.prototype.Destroy=function(){var t;e.prototype.Destroy.call(this),this.TableDetalle.destroy(!1),this.TableConsolidado.destroy(!1),null===(t=this._despachosDatePicker)||void 0===t||t.destroy()},t.prototype.Init=function(){this.InicializarDatePicker(),this.SortExtention(),this.InicializarButtons(),this.InicializarControls()},t.prototype.SortExtention=function(){r.fn.dataTable.ext.order["dom-checkbox"]=function(e,t){return this.api().column(t,{order:"index"}).nodes().map((function(e,t){return r("input",e).prop("checked")?"1":"0"}))}},t.prototype.InicializarControls=function(){return s(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return p.SelectorMenu.SeleccionEnElMenu(),this.TableDetalle=(new d.ConfigureDataTable).ConfigureScrollX("#data-table-despacho-detalle",[{orderDataType:"dom-checkbox"},null,null,null,null,null,null,null,null,null,null,null],[{width:"5%",targets:0}],"filtro_detalle"),this.TableConsolidado=(new d.ConfigureDataTable).ConfigureScrollX("#data-table-despacho-consolidado",null,[{width:"5%",targets:0}],"filtro_consolidado"),r(".select2").select2({dropdownAutoWidth:!0,width:"100%"}),M.Tabs.init(document.querySelectorAll(".tabs")),this.gestionDespachos=new u.DespachosGestionPage(document.getElementById("despacho-modal")),this.gestionDespachos.onDespachoCreado=function(){return e.LimpiarFormulario()},this.gestionDespachos.onDespachoActualizado=function(t){return e.ActualizarFilaDatatable(t)},M.updateTextFields(),this._formDespacho=document.querySelector("#despacho-form"),this._formData=new FormData(this._formDespacho),r(this._formDespacho).removeData("validator").removeData("unobtrusiveValidation"),r.validator.unobtrusive.parse(this._formDespacho),this._formDespacho.onsubmit=function(t){return t.preventDefault(),r(e._formDespacho).valid()&&(e._formData=new FormData(e._formDespacho),e.MaskManager.SetUnmaskedFormValue(e._formData),e.BuscarDespachos()),!1},[2]}))}))},t.prototype.InicializarDatePicker=function(){return s(this,void 0,void 0,(function(){var e,t=this;return i(this,(function(o){switch(o.label){case 0:return e=this,[4,this.GetInitialCloseDate()];case 1:return e._despachosFechaInicial=o.sent(),console.log(this._despachosFechaInicial),this._despachosDatePicker=(new m.DatepickerComponent).GetInstances2("#fecha-despacho",{onClose:function(){t.UpdateMaskValue()},onDraw:function(){t.ConfigClosedDates()},minDate:new Date(this._despachosFechaInicial),maxDate:new Date}),this.RegistrarFormatos(),[2]}}))}))},t.prototype.InicializarButtons=function(){var e=this,t=document.getElementById("kanba"),o=document.getElementById("despacho-add"),a=document.getElementById("borrar-filtro"),n=document.getElementById("tab_detalle"),s=document.getElementById("tab_consolidado"),i=this;t.addEventListener("click",(function(e){e.target.classList.contains("despacho-detail")&&i.BuscarDetalleDetalle(e.target.dataset.iddespacho,e),e.target.classList.contains("despacho-edit")&&i.EditarDespacho(e.target.dataset.iddespacho),e.target.classList.contains("despacho-consolidated")&&i.BuscarDetalleConsolidado(e.target.dataset.idproducto,e)})),o.addEventListener("click",(function(t){return e.CrearDespacho()})),a.addEventListener("click",(function(t){return e.LimpiarFormulario()})),n.addEventListener("click",(function(t){return e.RenderizarTablaDetalle()})),s.addEventListener("click",(function(t){return e.RenderizarTablaConsolidado()})),t.addEventListener("change",(function(e){e.target.classList.contains("despacho-estado")&&i.CambioEstado(e.target.dataset.iddespacho,e)})),r("#terminal-despacho").change((function(){i.ConsultarCompañias()})),r("#compañia-despacho").change((function(){i.VerificacionActivacionBtnCrear()})),r("#fecha-despacho").change((function(){i.LimpiarTablas()}))},t.prototype.RenderizarTablaDetalle=function(){var e=this;setTimeout((function(){e.TableDetalle.draw(!1)}),600)},t.prototype.RenderizarTablaConsolidado=function(){var e=this;setTimeout((function(){e.TableConsolidado.draw(!1)}),600)},t.prototype.VerificacionActivacionBtnCrear=function(){this.LimpiarTablas();var e=document.getElementById("terminal-despacho").value,t=document.getElementById("compañia-despacho").value,o=document.getElementById("despacho-add");""==e||""==t||"TODAS"==t?o.classList.add("disabled"):o.classList.remove("disabled")},t.prototype.ActualizarFilaDatatable=function(e){var t=r("tr#"+e.Id_Despacho),o=this.TableDetalle.row(t).data();o[5]=e.Placa_Cabezote,o[6]=e.Placa_Trailer,o[7]=e.Cedula_Conductor,o[9]=e.Volumen_Ordenado,o[10]=e.Volumen_Cargado,this.TableDetalle.row(t).data(o)},t.prototype.BuscarDespachos=function(){var e=this;try{var t=document.getElementById("terminal-despacho").value,o=document.getElementById("compañia-despacho").value,a=document.getElementById("fecha-despacho").value;if(""!=t&&""!=o&&""!=a){var r={terminal:t,compañia:o,fechaCorte:a};this.LimpiarTablas(),this._httpService.Post("/Despachos/BuscarDespachosDetallados",r,!1).then((function(t){t?(document.getElementById("lista-detalle").innerHTML=t,e.TableDetalle=(new d.ConfigureDataTable).ConfigureScrollX("#data-table-despacho-detalle",[{orderDataType:"dom-checkbox"},null,null,null,null,null,null,null,null,null,null,null],[{width:"5%",targets:0}],"filtro_detalle"),M.toast({html:"Búsqueda de detalles finalizada",classes:"succes"})):M.toast({html:t,classes:"error"})})).catch((function(e){M.toast({html:"No es posible consultar los datos: "+e,classes:"error"}),console.log(e)})),this._httpService.Post("/Despachos/BuscarDespachosConsolidados",r,!1).then((function(t){t?(document.getElementById("lista-consolidado").innerHTML=t,e.TableConsolidado=(new d.ConfigureDataTable).ConfigureScrollX("#data-table-despacho-consolidado",null,[{width:"5%",targets:0}],"filtro_consolidado"),M.toast({html:"Búsqueda de consolidado finalizada",classes:"succes"})):M.toast({html:t,classes:"error"})})).catch((function(e){M.toast({html:"No es posible consultar los datos: "+e,classes:"error"}),console.log(e)}))}else M.toast({html:"Algún campo del registro no fue ingresado",classes:"error"});return!1}catch(e){M.toast({html:"Algo salió mal y no fue posible consultar los datos",classes:"error"})}},t.prototype.BuscarConsolidados=function(){var e,t;return s(this,void 0,void 0,(function(){var o,a,r,n,s=this;return i(this,(function(i){try{return o=document.getElementById("terminal-despacho").value,a=document.getElementById("compañia-despacho").value,r=document.getElementById("fecha-despacho").value,n={terminal:o,compañia:a,fechaCorte:r},null===(e=this.TableConsolidado)||void 0===e||e.clear(),null===(t=this.TableConsolidado)||void 0===t||t.draw(),""!=o&&""!=a&&""!=r?this._httpService.Post("/Despachos/BuscarDespachosConsolidados",n,!1).then((function(e){e?(document.getElementById("lista-consolidado").innerHTML=e,s.TableConsolidado=(new d.ConfigureDataTable).ConfigureScrollX("#data-table-despacho-consolidado",null,[{width:"5%",targets:0}],"filtro_consolidado"),M.toast({html:"Búsqueda de consolidado finalizada",classes:"succes"})):M.toast({html:e,classes:"error"})})).catch((function(e){M.toast({html:"No es posible consultar los datos: "+e,classes:"error"}),console.log(e)})):M.toast({html:"Algún campo de la búsqueda fue modificado, por favor recargue la búsqueda",classes:"error"}),[2,!1]}catch(e){this.LimpiarFormulario(),M.toast({html:"Algo salió mal por favor realice nuevamente la consulta",classes:"error"})}return[2]}))}))},t.prototype.CrearDespacho=function(){var e={Id_Terminal:document.getElementById("terminal-despacho").value,Id_Compañia:document.getElementById("compañia-despacho").value};this.gestionDespachos.NuevoDespacho(e)},t.prototype.EditarDespacho=function(e){this.gestionDespachos.DatosDespacho(e,!0)},t.prototype.BuscarDetalleDetalle=function(e,t){return s(this,void 0,void 0,(function(){var o,a,r;return i(this,(function(n){if(o=t.target.parentNode,a=this.TableDetalle.row(o),r=this,a.child.isShown())a.child.hide(),o.classList.remove("shown");else try{return this._httpService.Post("/Despachos/ObtenerDetalleDetalle",e,!1).then((function(e){var t=JSON.parse(e);if(e){var n='<tr style="background: lightgrey;"><td><table id="data-table-detalleDetalle" class="" style="width:35%; white-space:nowrap"><thead><tr><th>Componente</th><th>Volumen Bruto - Gal</th><th>Volumen Neto - Gal</th><th>Temperatura - °F</th><th>Densidad - API</th></tr></thead><tbody>';Object.values(t.Payload).forEach((function(e){var t="<tr><td>"+e.Componente+"</td><td>"+r.Formato(e.Volumen_Bruto)+"</td><td>"+r.Formato(e.Volumen_Neto)+"</td><td>"+e.Temperatura+"</td><td>"+e.Densidad+"</td></tr>";n+=t})),n+="</tbody></table></td></tr>",a.child(n).show(),o.classList.add("shown")}})).catch((function(e){M.toast({html:"No es posible consultar el detalle de detalle: "+e,classes:"error"}),console.log(e)})),[2,!1]}catch(e){M.toast({html:"Algo salió mal y no fue posible consultar el detalle de detalle",classes:"error"})}return[2]}))}))},t.prototype.BuscarDetalleConsolidado=function(e,t){return s(this,void 0,void 0,(function(){var o,a,r,n,s,c,l;return i(this,(function(i){if(o=t.target.parentNode,a=this.TableConsolidado.row(o),r=document.getElementById("terminal-despacho").value,n=document.getElementById("compañia-despacho").value,s=document.getElementById("fecha-despacho").value,c=this,l={Terminal:r,Compañia:n,fechaCorte:s,IdProducto:e},a.child.isShown())a.child.hide(),o.classList.remove("shown");else try{return this._httpService.Post("/Despachos/ObtenerDetalleConsolidado",l,!1).then((function(e){var t=JSON.parse(e);if(e){var r='<tr style="background: lightgrey;"><td><table id="data-table-detalleConsolidado" class="" style="width:50%; white-space:nowrap"><thead><tr><th>Código Producto</th><th>Componente</th><th>Volumen Bruto - Gal</th><th>Temperatura - °F</th><th>Densidad - API</th><th>Volumen Neto - Gal</th><th>Factor</th></tr></thead><tbody>';Object.values(t.Payload).forEach((function(e){var t="<tr> <td>"+e.IdProducto+"</td><td>"+e.Producto+"</td><td>"+c.Formato(e.VolumenUnitarioBruto)+"</td><td>"+e.TemperaturaPonderada+"</td><td>"+e.DensidadPonderada+"</td><td>"+c.Formato(e.VolumenUnitarioNeto)+"</td><td>"+e.Factor+"</td></tr>";r+=t})),r+="</tbody></table></td></tr>",a.child(r).show(),o.classList.add("shown")}})).catch((function(e){M.toast({html:"No es posible consultar el detalle de consolidado: "+e,classes:"error"}),console.log(e)})),[2,!1]}catch(e){M.toast({html:"Algo salió mal y no fue posible consultar el detalle de consolidado",classes:"error"})}return[2]}))}))},t.prototype.Formato=function(e){var t,o=e;if((o=(o=o.toString()).split("."))[1]||(o[1]="00"),o[0].length>3){var a=o[0].length%3;t=0===a?[]:[o[0].substring(0,a)];for(var r=Math.floor(o[0].length/3),n=0;n<r;n++){var s=3*n+a;t.push(o[0].substring(s,s+3))}}else t=[o[0]];return t.join(",")+"."+o[1]},t.prototype.CambioEstado=function(e,t){return s(this,void 0,void 0,(function(){var o,a,n,s,c,d,u=this;return i(this,(function(i){switch(i.label){case 0:return[4,new l.ConfirmModalMessage("Cambio de Estado","¿Está seguro de cambiar el estado?","Aceptar","Cancelar").Confirm()];case 1:return i.sent()?(o=t.target.checked?"True":"False",a={Despacho:e,Lectura:t.target.checked},n=(t.target.id+"").split("-"),s=n[2],c=r("tr#"+e),this.TableDetalle.row(c),d=this.TableDetalle.row(c).data(),this._httpService.Post("/Despachos/ActualizarEstadoDespacho",a,!1).then((function(a){JSON.parse(a).Result?(u.MaskManager.ApplyMasks(),d[0]=u.HtmlCambioEstado(s,o,e),u.TableDetalle.row(c).data(d),u.TableDetalle.row(c).invalidate(),M.toast({html:"Se cambia el estado correctamente",classes:"succes"}),u.BuscarConsolidados()):(M.toast({html:"No fue posible actualizar el estado",classes:"error"}),t.target.checked&&(t.target.checked=!1))})).catch((function(e){M.toast({html:"No es posible cambiar el estado: "+e,classes:"error"}),t.target.checked?t.target.checked=!1:t.target.checked=!0})),[2]):t.target.checked?(t.target.checked=!1,[2]):(t.target.checked=!0,[2])}}))}))},t.prototype.HtmlCambioEstado=function(e,t,o){return'<div class="switch"><label><label id="label-estado-'+e+'" data-order="'+t+'" style="display:none" data-sort="'+t+'" class="est">'+t+"</label>"+("True"==t?'<input id="switch-estado-'+e+'" class="despacho-estado" type="checkbox" checked="checked" data-idDespacho="'+o+'">':'<input id="switch-estado-'+e+'" class="despacho-estado" type="checkbox" data-idDespacho="'+o+'">')+'<span class="lever"></span></label></div>'},t.prototype.ConsultarCompañias=function(){return s(this,void 0,void 0,(function(){var e,t=this;return i(this,(function(o){return e=document.getElementById("terminal-despacho").value,this._terminalSeleccionada=e,""!=e&&this._despachosDatePicker.el.removeAttribute("disabled"),this.VerificacionActivacionBtnCrear(),r("#compañia-despacho").val(null).trigger("change"),this._httpService.Post(this._baseUrl+"/ConsultarCompañias",e,!0).then((function(e){e&&(t.LimpiarOpciones(),t._arrayCompañias=e,t.AgregarCompañias())})).catch((function(e){M.toast({html:e,classes:"error"})})),[2]}))}))},t.prototype.LimpiarOpciones=function(){for(var e=document.getElementById("compañia-despacho"),t=r("#compañia-despacho option").length;t>1;t--)e[t-1].remove()},t.prototype.AgregarCompañias=function(){for(var e=document.getElementById("compañia-despacho"),t=0;t<=this._arrayCompañias.length;t++){var o=document.createElement("option");0==t?(o.value="TODAS",o.text="TODAS"):(o.value=this._arrayCompañias[t-1].Value,o.text=this._arrayCompañias[t-1].Text),e.append(o)}M.FormSelect.init(document.querySelectorAll("select"))},t.prototype.LimpiarFormulario=function(){this._formDespacho.reset(),this.LimpiarOpciones(),this.LimpiarTablas(),document.getElementById("despacho-add").classList.add("disabled"),r("input").not("input[type= 'hidden']").val(null),r(".select2").val(null).trigger("change"),M.updateTextFields(),this._despachosDatePicker.el.setAttribute("disabled","disabled")},t.prototype.LimpiarTablas=function(){var e,t;null===(e=this.TableDetalle)||void 0===e||e.clear(),null===(t=this.TableDetalle)||void 0===t||t.draw(),this.TableConsolidado.clear(),this.TableConsolidado.draw()},t.prototype.RegistrarFormatos=function(){this.RegisterMasks([h.MaskFormats.DateShortFormat()])},t.prototype.UpdateMaskValue=function(){this.MaskManager.UpdateValue([".formato-fecha-corta"])},t.prototype.ConfigClosedDates=function(){return s(this,void 0,void 0,(function(){var e,t,o,a,r,n,s;return i(this,(function(i){switch(i.label){case 0:return f(this._despachosFechaInicial),e=f(),t=document.querySelector(".datepicker-table"),o=document.querySelector(".select-year select.orig-select-year"),a=document.querySelector(".select-month select.orig-select-month"),r=parseInt(o.options[o.selectedIndex].text),n=a.selectedIndex,t.classList.add("disable"),[4,this.GetCloseDates(new Date(r,n,1),this._terminalSeleccionada)];case 1:return s=i.sent(),t.classList.remove("disable"),document.querySelectorAll(".datepicker-table td .datepicker-day-button").forEach((function(t,o,a){var i=parseInt(t.dataset.day),c=s.find((function(e){return f(e.Fecha).date()==i}));if(c)t.parentElement.classList.add(c.Cierre?"is-closed-date":"is-open-date");else{var l=new Date(r,n,i);e.isSame(l,"day")&&t.parentElement.classList.add("is-current-date")}})),[2]}}))}))},t.prototype.GetCloseDates=function(e,t){return s(this,void 0,void 0,(function(){var o;return i(this,(function(a){return o={IdEntidad:t,Fecha:e},[2,new Promise((function(e,t){(new c.HttpFetchService).Post("/Despachos/ObtenerFechasCierreMes/",o,!0).then((function(t){t&&e(t)})).catch((function(e){t("Error: "+e)}))}))]}))}))},t.prototype.GetInitialCloseDate=function(){return s(this,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e,t){(new c.HttpFetchService).Post("/Despachos/ObtenerFechaCierreInicial/","",!0).then((function(t){t&&e(t)})).catch((function(e){t("Error: "+e)}))}))]}))}))},t.prototype.ObtenerFechaCierreInicial=function(){var e;return(new c.HttpFetchService).Post("/Despachos/ObtenerFechaCierreInicial/","",!0).then((function(t){t&&(e=t)})).catch((function(e){})),e},t.prototype.FormattFields=function(){this.RegisterMasks([h.MaskFormats.DecimalFormatRang(".volumen",0,1e6)])},t}(o("./Scripts/Core/Page.ts").Page);t.DespachosPage=v;var y=new v;document.addEventListener("turbolinks:render",(function(e){-1!=document.URL.indexOf("/Despachos/Index")?v?y.Init():y=new v:null==y||y.Destroy()}))},"./Scripts/Pages/Despachos/GestionDespachos.ts":function(e,t,o){var a,r=o("./node_modules/jquery/dist/jquery.js"),n=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__awaiter||function(e,t,o,a){return new(o||(o=Promise))((function(r,n){function s(e){try{c(a.next(e))}catch(e){n(e)}}function i(e){try{c(a.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var o,a,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(n){return function(i){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,a=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],a=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DespachosGestionPage=void 0;var c=o("./Scripts/Shared/index.ts"),l=o("./Scripts/Shared/Models/Despacho.ts");o("./node_modules/jquery-qubit/jquery.qubit.js"),o("./node_modules/jquery-bonsai/jquery.bonsai.js"),o("./node_modules/jquery-bonsai/jquery.bonsai.css"),o("./node_modules/select2/dist/js/select2.js"),o("./node_modules/select2/dist/css/select2.css");var d=o("./Scripts/Shared/Utils/MaskFormats.ts"),u=o("./Scripts/Shared/Components/ConfigureDataTable.ts"),p=o("./node_modules/dayjs/dayjs.min.js"),h=o("./Scripts/Shared/Utils/index.ts"),m=o("./Scripts/Shared/Components/DatepickerComponent.ts"),f=function(e){function t(t){var o=e.call(this)||this;return o._baseUrl="/Despachos",o._MaskFormatsComponentes=new h.MaskFormatsManager,o._httpService=new c.HttpFetchService,o._modalBase=t,o.InicializarModal(),o.RegistrarFormatos(),o.GetInitialCloseDate(),o}return n(t,e),t.prototype.NuevoDespacho=function(e){var t=this;this._httpService.Post(this._baseUrl+"/NuevoDespacho",e,!1).then((function(e){t._modalBase.innerHTML=e,t.InicilizarFormDespacho(!0),t.MaskManager.ApplyMasks(),t._MaskFormatsComponentes.ApplyMasks(),t._crear=!0,t._habilitarConsultaComp=!0})),this._modalInstance.open()},t.prototype.CalcularFactor=function(){r("#data-table-componentes tbody").find("tr").each((function(){var e,t=r(this),o=t.find("input.volumenNeto").val()+"",a=t.find("input.volumenBruto").val()+"",n=t.find("input.factor");o=o.replace(/,/g,""),a=a.replace(/,/g,""),e=(parseFloat(o)/parseFloat(a)).toFixed(5),isNaN(e)?n.val("0"):n.val(e)}))},t.prototype.GuardarDespacho=function(){var e,t=this,o=null===(e=this._formData.get("RequestVerificationToken"))||void 0===e?void 0:e.toString(),a=this._formData.get("Compartimento");this._formData.set("Terminal",document.getElementById("despacho-terminal").value),this._formData.set("Compañia",document.getElementById("despacho-compañia").value),this._formData.set("IdProducto",document.getElementById("despacho-producto").value),""==a||a<"1"||a>"5"?M.toast({html:"Por favor seleccionar un compartimento",classes:"error"}):this._httpService.PostForm(this._baseUrl+"/CrearDespacho",this._formData,o).then((function(e){e.Result&&(t._habilitarConsultaComp=!1,t.onDespachoCreado&&t.onDespachoCreado(),t.CerrarModal()),M.toast({html:e.Message,classes:e.Result?"succes":"error"})})).catch((function(e){return console.log(e)}))},t.prototype.DatosDespacho=function(e,t){var o=this,a={Despacho:e,lectura:t};this._DespachoIdActualizar=e,this._httpService.Post(this._baseUrl+"/EditarDespacho",a,!1).then((function(e){o._modalBase.innerHTML=e,o.InicilizarFormDespacho(!1),o.MaskManager.ApplyMasks(),o._MaskFormatsComponentes.ApplyMasks()})),this._modalInstance.open()},t.prototype.ActualizarDespacho=function(){var e,t=this,o=null===(e=this._formData.get("RequestVerificationToken"))||void 0===e?void 0:e.toString(),a=this._formData.get("Compartimento");this._formData.set("Terminal",document.getElementById("despacho-terminal").value),this._formData.set("Compañia",document.getElementById("despacho-compañia").value),this._formData.set("IdProducto",document.getElementById("despacho-producto").value),""==a||a<"1"||a>"5"?M.toast({html:"Por favor seleccionar un compartimento",classes:"error"}):this._httpService.PostForm(this._baseUrl+"/ActualizarDespacho",this._formData,o).then((function(e){e.Result&&(t.onDespachoActualizado&&t.onDespachoActualizado(t.ExtraerDespacho()),t.CerrarModal()),M.toast({html:e.Message,classes:e.Result?"succes":"error"})})).catch((function(e){return console.log(e)}))},t.prototype.InicializarModal=function(){this._modalInstance=M.Modal.init(this._modalBase,{dismissible:!1,opacity:.5,inDuration:300,outDuration:200,startingTop:"6%",endingTop:"8%"})},t.prototype.InicilizarFormDespacho=function(e){var t=this;r(".select2").select2({dropdownAutoWidth:!0,width:"100%"}),this.TableComponente=(new u.ConfigureDataTable).ConfigureScrollXSinInfo("#data-table-componentes",[{width:"5%",targets:0}]),document.getElementById("lista-componentes").addEventListener("keyup",(function(e){t.CalcularFactor()})),this._despachosDatePicker=(new m.DatepickerComponent).GetInstances2("#despacho-fecha",{onClose:function(){t.UpdateMaskValue()},onDraw:function(){t.ConfigClosedDates()},minDate:p(this._despachosFechaInicial,"YYYY-MM-DD").toDate(),maxDate:new Date}),M.updateTextFields(),this._formDespacho=document.querySelector("#despacho-modal-form"),this._formData=new FormData(this._formDespacho),r(this._formDespacho).removeData("validator").removeData("unobtrusiveValidation"),r.validator.unobtrusive.parse(this._formDespacho),document.getElementById("despacho-modal-cancel").addEventListener("click",(function(e){return t.CerrarModal()})),this._formDespacho.onsubmit=function(o){return o.preventDefault(),r(t._formDespacho).valid()&&(t._formData=new FormData(t._formDespacho),t.MaskManager.SetUnmaskedFormValue(t._formData),e?t.GuardarDespacho():t.ActualizarDespacho()),!1};var o=this;r("#despacho-producto").change((function(){o.ConsultarComponentes()})),r("#volumen-cargado").keyup((function(){o.RecalcularVolBrutos()}))},t.prototype.ConsultarComponentes=function(){return s(this,void 0,void 0,(function(){var e,t,o,a,n=this;return i(this,(function(s){if(this._crear&&this._habilitarConsultaComp)try{return e=document.getElementById("despacho-terminal").value,t=document.getElementById("despacho-producto").value,""!=(o=document.getElementById("volumen-cargado").value)?(a={IdTerminal:e,IdProducto:t,VolumenCargado:o},this._httpService.Post("/Despachos/ObtenerRecetaActivaPorProductoTerminal",a,!1).then((function(e){e?(document.getElementById("lista-componentes").innerHTML=e,r(".select2").select2({dropdownAutoWidth:!0,width:"100%"}),n.TableComponente=(new u.ConfigureDataTable).ConfigureScrollXSinInfo("#data-table-componentes",[{width:"5%",targets:0}]),n._MaskFormatsComponentes.ApplyMasks()):M.toast({html:e,classes:"error"})})).catch((function(e){M.toast({html:"No fue posible cargar los componentes: "+e,classes:"error"}),console.log(e)}))):M.toast({html:"Por favor ingresar un volumen cargado para recalcular los componentes",classes:"error"}),[2,!1]}catch(e){M.toast({html:"Algo salió mal y no fue posible consultar los componentes",classes:"error"})}return[2]}))}))},t.prototype.RecalcularVolBrutos=function(){return s(this,void 0,void 0,(function(){var e,t,o,a,n=this;return i(this,(function(s){if(this._crear&&this._habilitarConsultaComp)try{return e=document.getElementById("despacho-terminal").value,t=document.getElementById("despacho-producto").value,o=document.getElementById("volumen-cargado").value,""!=t?this._VolumenBruto!=o&&""!=o&&(a={IdTerminal:e,IdProducto:t,VolumenCargado:o},this._httpService.Post("/Despachos/ObtenerRecetaActivaPorProductoTerminal",a,!1).then((function(e){e?(document.getElementById("lista-componentes").innerHTML=e,r(".select2").select2({dropdownAutoWidth:!0,width:"100%"}),n.TableComponente=(new u.ConfigureDataTable).ConfigureScrollXSinInfo("#data-table-componentes",[{width:"5%",targets:0}]),n._MaskFormatsComponentes.ApplyMasks()):M.toast({html:e,classes:"error"})})).catch((function(e){M.toast({html:"No fue posible cargar los componentes: "+e,classes:"error"}),console.log(e)}))):M.toast({html:"Por favor seleccionar un producto para recalcular los componentes",classes:"error"}),this._VolumenBruto=o,[2,!1]}catch(e){M.toast({html:"Algo salió mal y no fue posible consultar los componentes",classes:"error"})}return[2]}))}))},t.prototype.ExtraerDespacho=function(){var e,t,o,a,r,n,s=new l.Despacho;return s.Id_Despacho=null===(e=this._formData.get("Id_Despacho"))||void 0===e?void 0:e.toString(),s.Placa_Cabezote=null===(t=this._formData.get("Placa_Cabezote"))||void 0===t?void 0:t.toString(),s.Placa_Trailer=null===(o=this._formData.get("Placa_Trailer"))||void 0===o?void 0:o.toString(),s.Volumen_Ordenado=null===(a=this._formData.get("Volumen_Ordenado"))||void 0===a?void 0:a.toString(),s.Volumen_Cargado=null===(r=this._formData.get("Volumen_Cargado"))||void 0===r?void 0:r.toString(),s.Cedula_Conductor=null===(n=this._formData.get("Cedula_Conductor"))||void 0===n?void 0:n.toString(),s},t.prototype.LimpiarFormulario=function(){this._formDespacho.reset(),r("input").not("input[type= 'hidden']").val(null),r(".select2").val(null).trigger("change"),M.updateTextFields()},t.prototype.CerrarModal=function(){this._crear&&this._despachosDatePicker.destroy(),this._habilitarConsultaComp=!1,this._crear=!1,this.TableComponente.destroy(!1),this._modalInstance.close(),this._formDespacho.parentNode.removeChild(this._formDespacho),this._DespachoIdActualizar=""},t.prototype.RegistrarFormatos=function(){this.RegisterMasks([d.MaskFormats.DateShortFormat(),d.MaskFormats.Alfanumerico("#placa-cabezote"),d.MaskFormats.Alfanumerico("#placa-trailer"),d.MaskFormats.DecimalFormatRang("#volumen-ordenado",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen-cargado",0,1e6)]),this._MaskFormatsComponentes.RegisterMasks([d.MaskFormats.DecimalFormatRang("#volumen_bruto_0",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_bruto_1",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_bruto_2",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_bruto_3",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_neto_0",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_neto_1",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_neto_2",0,1e6),d.MaskFormats.DecimalFormatRang("#volumen_neto_3",0,1e6),d.MaskFormats.DecimalFormatRang("#temperatura_0",32,150),d.MaskFormats.DecimalFormatRang("#temperatura_1",32,150),d.MaskFormats.DecimalFormatRang("#temperatura_2",32,150),d.MaskFormats.DecimalFormatRang("#temperatura_3",32,150),d.MaskFormats.DecimalFormatRang("#densidad_0",10,100),d.MaskFormats.DecimalFormatRang("#densidad_0",10,100),d.MaskFormats.DecimalFormatRang("#densidad_2",10,100),d.MaskFormats.DecimalFormatRang("#densidad_3",10,100)])},t.prototype.UpdateMaskValue=function(){this.MaskManager.UpdateValue([".formatos-fecha-corta"])},t.prototype.ConfigClosedDates=function(){return s(this,void 0,void 0,(function(){var e,t,o,a,r,n,s,c;return i(this,(function(i){switch(i.label){case 0:return e=p(this._despachosFechaInicial),t=p(),o=document.querySelector(".datepicker-table"),a=document.querySelector(".select-year select.orig-select-year"),r=document.querySelector(".select-month select.orig-select-month"),n=parseInt(a.options[a.selectedIndex].text),s=r.selectedIndex,o.classList.add("disable"),[4,this.GetCloseDates(new Date(n,s,1))];case 1:return c=i.sent(),o.classList.remove("disable"),document.querySelectorAll(".datepicker-table td .datepicker-day-button").forEach((function(o,a,r){var i=parseInt(o.dataset.day);if(c.some((function(e){return p(e).date()==i})))o.parentElement.classList.add("is-closed-date");else{var l=new Date(n,s,i);t.isSame(l,"day")||t.isAfter(l)&&e.isBefore(l)&&o.parentElement.classList.add("is-open-date")}})),[2]}}))}))},t.prototype.GetCloseDates=function(e){return s(this,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t,o){(new c.HttpFetchService).Post("/Despachos/ObtenerFechasCierreMes/",e,!0).then((function(e){e&&t(e)})).catch((function(e){o("Error: "+e)}))}))]}))}))},t.prototype.GetInitialCloseDate=function(){var e=this;(new c.HttpFetchService).Post("/Despachos/ObtenerFechaCierreInicial/","",!0).then((function(t){t&&(e._despachosFechaInicial=t)})).catch((function(e){}))},t}(o("./Scripts/Core/Page.ts").Page);t.DespachosGestionPage=f},"./Scripts/Shared/Components/ConfigureDataTable.ts":(e,t,o)=>{var a=o("./node_modules/jquery/dist/jquery.js");Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureDataTable=void 0,o("./node_modules/datatables.net-responsive/js/dataTables.responsive.js");var r=function(){function e(){}return e.prototype.Configure=function(e,t){var o=a(e).DataTable({columnDefs:t,destroy:!0,responsive:!0,language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",info:"Mostrando del _START_ al _END_ de _TOTAL_ registros",infoEmpty:"Mostrando del 0 al 0 de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",thousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"}}});return this.FilterGlobal(o),o},e.prototype.ConfigureScrollX=function(e,t,o,r){var n=a(e).DataTable({columnDefs:o,columns:t,destroy:!0,scrollX:!0,language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",info:"Mostrando del _START_ al _END_ de _TOTAL_ registros",infoEmpty:"Mostrando del 0 al 0 de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",thousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"}}});return this.FilterGlobal(n,r),n},e.prototype.ConfigureScrollXSinInfo=function(e,t){return a(e).DataTable({columnDefs:t,destroy:!0,scrollX:!0,paging:!1,ordering:!1,searching:!1,info:!1,language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",info:"Mostrando del _START_ al _END_ de _TOTAL_ registros",infoEmpty:"Mostrando del 0 al 0 de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",thousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"}}})},e.prototype.FilterGlobal=function(e,t){t?a("input#"+t).on("keyup click",(function(){e.search(a("#"+t).val().toString(),a("#global_regex").prop("checked"),a("#global_smart").prop("checked")).draw()})):a("input#global_filter").on("keyup click",(function(){e.search(a("#global_filter").val().toString(),a("#global_regex").prop("checked"),a("#global_smart").prop("checked")).draw()})),a("input.column_filter").on("keyup click",(function(){var t=a(this).parents("tr").attr("data-column");e.column(t).search(a("#col"+t+"_filter").val().toString(),a("#col"+t+"_regex").prop("checked"),a("#col"+t+"_smart").prop("checked")).draw()}))},e}();t.ConfigureDataTable=r},"./Scripts/Shared/Components/ConfirmModalMessage.ts":function(e,t){var o=this&&this.__awaiter||function(e,t,o,a){return new(o||(o=Promise))((function(r,n){function s(e){try{c(a.next(e))}catch(e){n(e)}}function i(e){try{c(a.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}c((a=a.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var o,a,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function i(n){return function(i){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,a=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],a=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmModalMessage=void 0;var r=function(){function e(e,t,o,a){this.title=e,this.message=t,this.acceptText=o,this.dismissText=a,this.idMesssage="confirm-message",this.parent=document.body,this.CreateModal(),this.AppendModel()}return e.prototype.CreateModal=function(){this.modal=document.createElement("div"),this.modal.id=this.idMesssage,this.modal.classList.add("modal","modal-fixed-footer","modal-confirm-message-small");var e=document.createElement("div");e.classList.add("modal-content"),this.modal.appendChild(e);var t=document.createElement("h5");t.textContent=this.title,e.appendChild(t);var o=document.createElement("p");o.textContent=this.message,e.appendChild(o);var a=document.createElement("div");a.classList.add("modal-footer"),this.modal.appendChild(a),this.dismissButton=document.createElement("button"),this.dismissButton.classList.add("modal-action","waves-effect","waves-red","btn-flat","btn-orange"),this.dismissButton.type="button",this.dismissButton.textContent=this.dismissText,a.appendChild(this.dismissButton),this.acceptButton=document.createElement("button"),this.acceptButton.classList.add("modal-action","waves-effect","waves-red","btn-flat","btn-orange"),this.acceptButton.type="button",this.acceptButton.textContent=this.acceptText,a.appendChild(this.acceptButton)},e.prototype.AppendModel=function(){this.parent.appendChild(this.modal)},e.prototype.destroy=function(){this.modalInstance&&(this.modalInstance.close(),this.modalInstance.destroy());var e=document.querySelector("#"+this.idMesssage);e.parentNode.removeChild(e)},e.prototype.Confirm=function(){return o(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){return[2,new Promise((function(t,o){(!e.modal||!e.acceptButton||!e.dismissButton)&&(e.destroy(),o("Fallo algo en la creación del mensaje")),M.Modal.init(e.modal,{dismissible:!1,opacity:.5,inDuration:300,outDuration:200,startingTop:"6%",endingTop:"8%"}),e.modalInstance=M.Modal.getInstance(e.modal),e.modalInstance.open(),e.acceptButton.addEventListener("click",(function(){t(!0),e.destroy()})),e.dismissButton.addEventListener("click",(function(){t(!1),e.destroy()}))}))]}))}))},e}();t.ConfirmModalMessage=r},"./Scripts/Shared/Components/DatepickerComponent.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DatepickerComponent=void 0;var o=function(){function e(){}return e.prototype.GetInstances2=function(e,t){var o=document.querySelectorAll(e);return M.Datepicker.init(o,this.ConfigBasics(t))[0]},e.prototype.ConfigBasics=function(e){return e?(e.format="dd/mmm/yyyy",e.container=document.body,e.autoClose=!0,e.i18n={cancel:"Cancelar",clear:"Limpiar",done:"Aceptar",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],weekdays:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysAbbrev:["D","L","M","M","J","V","S"]}):e={format:"dd/mmm/yyyy",container:document.body,autoClose:!0,i18n:{cancel:"Cancelar",clear:"Limpiar",done:"Aceptar",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],weekdays:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysAbbrev:["D","L","M","M","J","V","S"]}},e},e.prototype.GetInstances=function(e,t,o,a){var r=document.querySelectorAll(e);return M.Datepicker.init(r,{format:"dd/mmm/yyyy",container:document.body,autoClose:!0,i18n:{cancel:"Cancelar",clear:"Limpiar",done:"Aceptar",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],weekdays:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},onSelect:function(e){void 0!==t&&t(e)},onClose:function(){void 0!==o&&o()}})},e.prototype.GetInstances3=function(e,t,o){var a=document.querySelectorAll(e);return M.Datepicker.init(a,{format:"yyyy/mm/dd",container:document.body,autoClose:!0,i18n:{cancel:"Cancelar",clear:"Limpiar",done:"Aceptar",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekdays:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},onSelect:function(e){void 0!==t&&t(e)},onClose:function(){void 0!==o&&o()}})},e}();t.DatepickerComponent=o},"./Scripts/Shared/Http/HttpFetchService.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HttpFetchService=void 0;var o=function(){function e(){}return e.prototype.Post=function(e,t,o){return void 0===o&&(o=!0),new Promise((function(a,r){fetch(e,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return o?e.json():e.text()})).then((function(e){a(e)})).catch((function(e){console.log(e),r(e)}))}))},e.prototype.PostForm=function(e,t,o,a){return void 0===a&&(a=!0),new Promise((function(r,n){fetch(e,{method:"post",headers:{RequestVerificationToken:o},body:t}).then((function(e){return a?e.json():e.text()})).then((function(e){r(e)})).catch((function(e){console.log(e),n(e)}))}))},e.prototype.PostFormURL=function(e,t,o){return void 0===o&&(o=!0),new Promise((function(a,r){fetch(e,{method:"post",headers:{"Content-Type":"application/json"},body:t}).then((function(e){return o?e.json():e.text()})).then((function(e){a(e)})).catch((function(e){console.log(e),r(e)}))}))},e}();t.HttpFetchService=o},"./Scripts/Shared/Http/index.ts":function(e,t,o){var a=this&&this.__createBinding||(Object.create?function(e,t,o,a){void 0===a&&(a=o),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,a){void 0===a&&(a=o),e[a]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||a(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.services=void 0;var n=o("./Scripts/Shared/Http/HttpFetchService.ts");t.services=[n.HttpFetchService],r(o("./Scripts/Shared/Http/HttpFetchService.ts"),t)},"./Scripts/Shared/Models/ActionsPermission.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsPermission=void 0;t.ActionsPermission=function(){}},"./Scripts/Shared/Models/Area.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Area=void 0;t.Area=function(){}},"./Scripts/Shared/Models/Cabezote.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cabezote=void 0;t.Cabezote=function(){}},"./Scripts/Shared/Models/Compañia.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["Compañia"]=void 0;t["Compañia"]=function(){}},"./Scripts/Shared/Models/Conductor.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Conductor=void 0;t.Conductor=function(){}},"./Scripts/Shared/Models/Contador.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Contador=void 0;t.Contador=function(){}},"./Scripts/Shared/Models/Despacho.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Despacho=void 0;t.Despacho=function(){}},"./Scripts/Shared/Models/FechasCorteDTO.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FechasCorteDTO=void 0;t.FechasCorteDTO=function(){}},"./Scripts/Shared/Models/Linea.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Linea=void 0;t.Linea=function(){}},"./Scripts/Shared/Models/Log.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;t.Log=function(){}},"./Scripts/Shared/Models/MessageResponse.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./Scripts/Shared/Models/ProcesamientoArchivos.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Paso2Mapeo=t.Paso1Mapeo=t.MapeoArchivos=void 0;t.MapeoArchivos=function(){};t.Paso1Mapeo=function(){};t.Paso2Mapeo=function(){}},"./Scripts/Shared/Models/Producto.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Producto=void 0;t.Producto=function(){}},"./Scripts/Shared/Models/Proveedor.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Proveedor=void 0;t.Proveedor=function(){}},"./Scripts/Shared/Models/Rol.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rol=void 0;t.Rol=function(){}},"./Scripts/Shared/Models/Tanque.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tanque=void 0;t.Tanque=function(){}},"./Scripts/Shared/Models/Terminal.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;t.Terminal=function(){}},"./Scripts/Shared/Models/Trailer.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Trailer=void 0;t.Trailer=function(){}},"./Scripts/Shared/Models/Usuario.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Usuario=void 0;t.Usuario=function(){}},"./Scripts/Shared/Models/index.ts":function(e,t,o){var a=this&&this.__createBinding||(Object.create?function(e,t,o,a){void 0===a&&(a=o),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,a){void 0===a&&(a=o),e[a]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||a(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.models=void 0;var n=o("./Scripts/Shared/Models/Usuario.ts"),s=o("./Scripts/Shared/Models/Cabezote.ts"),i=o("./Scripts/Shared/Models/Trailer.ts"),c=o("./Scripts/Shared/Models/Conductor.ts"),l=o("./Scripts/Shared/Models/Area.ts"),d=o("./Scripts/Shared/Models/Compañia.ts"),u=o("./Scripts/Shared/Models/Log.ts"),p=o("./Scripts/Shared/Models/Linea.ts"),h=o("./Scripts/Shared/Models/Rol.ts"),m=o("./Scripts/Shared/Models/Terminal.ts"),f=o("./Scripts/Shared/Models/Tanque.ts"),v=o("./Scripts/Shared/Models/Contador.ts"),y=o("./Scripts/Shared/Models/Proveedor.ts"),g=o("./Scripts/Shared/Models/ProcesamientoArchivos.ts"),b=o("./Scripts/Shared/Models/Producto.ts"),M=o("./Scripts/Shared/Models/Despacho.ts"),S=o("./Scripts/Shared/Models/FechasCorteDTO.ts");t.models=[n.Usuario,s.Cabezote,i.Trailer,c.Conductor,l.Area,u.Log,h.Rol,d.Compañia,m.Terminal,f.Tanque,v.Contador,p.Linea,y.Proveedor,g.MapeoArchivos,b.Producto,M.Despacho,S.FechasCorteDTO],r(o("./Scripts/Shared/Models/MessageResponse.ts"),t),r(o("./Scripts/Shared/Models/Usuario.ts"),t),r(o("./Scripts/Shared/Models/Cabezote.ts"),t),r(o("./Scripts/Shared/Models/Trailer.ts"),t),r(o("./Scripts/Shared/Models/Conductor.ts"),t),r(o("./Scripts/Shared/Models/Area.ts"),t),r(o("./Scripts/Shared/Models/Linea.ts"),t),r(o("./Scripts/Shared/Models/Compañia.ts"),t),r(o("./Scripts/Shared/Models/Rol.ts"),t),r(o("./Scripts/Shared/Models/Terminal.ts"),t),r(o("./Scripts/Shared/Models/Tanque.ts"),t),r(o("./Scripts/Shared/Models/Contador.ts"),t),r(o("./Scripts/Shared/Models/Log.ts"),t),r(o("./Scripts/Shared/Models/Proveedor.ts"),t),r(o("./Scripts/Shared/Models/ProcesamientoArchivos.ts"),t),r(o("./Scripts/Shared/Models/Producto.ts"),t),r(o("./Scripts/Shared/Models/Despacho.ts"),t),r(o("./Scripts/Shared/Models/FechasCorteDTO.ts"),t)},"./Scripts/Shared/Utils/HTMLExtensions.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),HTMLElement.prototype.on=function(e,t,o){this.addEventListener(e,(function(e){e.target.matches(t)&&o(e)}))}},"./Scripts/Shared/Utils/JQValidations.ts":(e,t,o)=>{var a=o("./node_modules/jquery/dist/jquery.js");Object.defineProperty(t,"__esModule",{value:!0}),t.JQValidations=void 0,o("./node_modules/jquery-validation/dist/jquery.validate.js"),o("./node_modules/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.js");var r=function(){function e(){}return e.MaxFileSizeValidation=function(){a.validator.methods.maxfilesize||(a.validator.addMethod("maxfilesize",(function(e,t,o){var a=o,r=t.files[0];return!(r&&r.size/1024>a)})),a.validator.unobtrusive.adapters.add("maxfilesize",["size"],(function(e){e.rules.maxfilesize=e.params.size,e.messages.maxfilesize=e.message})))},e.AllowedExtensionsValidation=function(){a.validator.methods.allowedextensions||(a.validator.addMethod("allowedextensions",(function(e,t,o){var a=o,r=t.files[0],n=a.split(",");return!r||!!new RegExp("("+n.join("|").replace(/\./g,"\\.")+")$").test(e)})),a.validator.unobtrusive.adapters.add("allowedextensions",["exts"],(function(e){e.rules.allowedextensions=e.params.exts,e.messages.allowedextensions=e.message})))},e.NotEqualValidation=function(){a.validator.methods.notequal||(a.validator.addMethod("notequal",(function(e,t,o){var a=o,r=t.value,n=document.getElementById(a).value;return!r||r!=n})),a.validator.unobtrusive.adapters.add("notequal",["IdinputTocompare"],(function(e){e.rules.notequal=e.params.IdinputTocompare,e.messages.notequal=e.message})))},e}();t.JQValidations=r},"./Scripts/Shared/Utils/MaskFormats.ts":(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MaskFormats=void 0;var a=o("./node_modules/imask/esm/index.js"),r=function(){function e(){}return e.IntegerFormat=function(){return{Selector:".formato-int",Mask:{mask:Number,scale:0,signed:!1,thousandsSeparator:",",padFractionalZeros:!1,normalizeZeros:!0,radix:".",mapToRadix:["."]}}},e.DecimalFormat=function(){return{Selector:".formato-decimal",Mask:{mask:Number,scale:2,signed:!1,thousandsSeparator:",",padFractionalZeros:!1,normalizeZeros:!0,radix:".",mapToRadix:["."]}}},e.DateShortFormat=function(){return{Selector:".formato-fecha-corta",Mask:{mask:"00{/}MMM{/}0000",overwrite:!0,autofix:!0,blocks:{MMM:{mask:a.default.MaskedEnum,enum:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}}}}},e.DateLongFormat=function(){return{Selector:".formato-fecha-larga",Mask:{mask:"00{/}MMM{/}0000{ }HH{:}TT{:}TT",overwrite:!0,autofix:!0,blocks:{MMM:{mask:a.default.MaskedEnum,enum:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},HH:{mask:a.default.MaskedRange,from:0,to:24},TT:{mask:a.default.MaskedRange,from:0,to:59}}}}},e.IntegerFormatRang=function(e,t,o){return{Selector:e,Mask:{mask:Number,min:t,max:o,scale:0,signed:!1,thousandsSeparator:",",padFractionalZeros:!1,normalizeZeros:!0,radix:".",mapToRadix:["."]}}},e.DecimalFormatRang=function(e,t,o){return{Selector:e,Mask:{mask:Number,min:t,max:o,scale:2,signed:!1,thousandsSeparator:",",padFractionalZeros:!1,normalizeZeros:!0,radix:".",mapToRadix:["."]}}},e.Alfanumerico=function(e){return{Selector:e,Mask:{mask:/^[a-z0-9]+$/i,lazy:!1}}},e.NumericoSinSignos=function(e){return{Selector:e,Mask:{mask:/^[0-9]+$/i,lazy:!1}}},e}();t.MaskFormats=r},"./Scripts/Shared/Utils/MaskFormatsManager.ts":(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MaskFormatsManager=void 0;var a=o("./node_modules/imask/esm/index.js"),r=function(){function e(){this.FormatElements=new Array}return e.prototype.RegisterMasks=function(e){this.CleanAll(),this.Masks=e},e.prototype.ApplyMasks=function(){var e,t=this;this.CleanFormats(),null===(e=this.Masks)||void 0===e||e.forEach((function(e,o,a){t.ApplyFormat(e)}))},e.prototype.AddApplyMask=function(e){this.Masks.push(e),this.ApplyFormat(e)},e.prototype.UnmaskFormats=function(){var e;null===(e=this.FormatElements)||void 0===e||e.forEach((function(e,t,o){e.MaskInput.el.input.value=e.MaskInput.unmaskedValue,e.MaskInput.masked.reset()}))},e.prototype.SetUnmaskedFormValue=function(e){var t;null===(t=this.FormatElements)||void 0===t||t.forEach((function(t,o,a){e.set(t.MaskInput.el.input.name,t.MaskInput.unmaskedValue),t.MaskInput.masked.reset()}))},e.prototype.UpdateValue=function(e){var t=this;(null==e?void 0:e.length)>0&&e.forEach((function(e){var o=t.FormatElements.filter((function(t){return t.Selector===e}));(null==o?void 0:o.length)>0&&o.forEach((function(e){e.MaskInput.updateValue(),e.MaskInput.unmaskedValue=e.MaskInput.el.value}))}))},e.prototype.ApplyFormat=function(e){var t=this;document.querySelectorAll(e.Selector).forEach((function(o){t.FormatElements.push({Selector:e.Selector,MaskInput:a.default(o,e.Mask)})}))},e.prototype.CleanAll=function(){var e;(null===(e=this.Masks)||void 0===e?void 0:e.length)>0&&this.Masks.forEach((function(e,t,o){o.splice(t,1)})),this.CleanFormats()},e.prototype.CleanFormats=function(){var e;(null===(e=this.FormatElements)||void 0===e?void 0:e.length)>0&&this.FormatElements.forEach((function(e,t,o){e.MaskInput.masked.reset(),e.MaskInput.destroy,o.splice(t,1)}))},e.prototype.Destroy=function(){this.CleanAll(),this.Masks=null,this.FormatElements=null},e}();t.MaskFormatsManager=r},"./Scripts/Shared/Utils/SelectorMenu.ts":(e,t,o)=>{var a=o("./node_modules/jquery/dist/jquery.js");Object.defineProperty(t,"__esModule",{value:!0}),t.SelectorMenu=void 0;var r=function(){function e(){}return e.SeleccionEnElMenu=function(){var e=location.href,t=e.indexOf("/",8),o="a[href$='"+e.substr(t,e.length)+"']";a(".nav-list li a").removeClass("active"),a(".collapsible-body").css({display:""}),a(".listaPadre").removeClass("active"),a(o).addClass("active");var r=a(o).attr("name");a("#"+r).addClass("active"),a("#"+r+" .collapsible-body").css({display:"block"});var n=a("#"+r).attr("name");a("#"+n).addClass("active"),a("#"+n+" #"+r+" .collapsible-body").css({display:"block"}),a("#"+n+" .nivel2").css({display:"block"}),a("#"+n+" .collapsible-body").first().css({display:"block"})},e}();t.SelectorMenu=r},"./Scripts/Shared/Utils/index.ts":function(e,t,o){var a=this&&this.__createBinding||(Object.create?function(e,t,o,a){void 0===a&&(a=o),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,a){void 0===a&&(a=o),e[a]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||a(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.components=void 0;var n=o("./Scripts/Shared/Utils/JQValidations.ts"),s=o("./Scripts/Shared/Utils/MaskFormats.ts"),i=o("./Scripts/Shared/Utils/MaskFormatsManager.ts");t.components=[n.JQValidations,s.MaskFormats,i.MaskFormatsManager],r(o("./Scripts/Shared/Utils/JQValidations.ts"),t),r(o("./Scripts/Shared/Utils/MaskFormats.ts"),t),r(o("./Scripts/Shared/Utils/MaskFormatsManager.ts"),t)},"./Scripts/Shared/index.ts":function(e,t,o){var a=this&&this.__createBinding||(Object.create?function(e,t,o,a){void 0===a&&(a=o),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,a){void 0===a&&(a=o),e[a]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||a(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o("./Scripts/Shared/Http/index.ts"),t),r(o("./Scripts/Shared/Models/index.ts"),t),r(o("./Scripts/Shared/Utils/HTMLExtensions.ts"),t)}},t={};function o(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,o),r.exports}return o.m=e,o.x=e=>{},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={despachos:0},t=[["./Scripts/Pages/Despachos/Despachos.ts","packages"]],a=e=>{},r=(r,n)=>{for(var s,i,[c,l,d,u]=n,p=0,h=[];p<c.length;p++)i=c[p],o.o(e,i)&&e[i]&&h.push(e[i][0]),e[i]=0;for(s in l)o.o(l,s)&&(o.m[s]=l[s]);for(d&&d(o),r&&r(n);h.length;)h.shift()();return u&&t.push.apply(t,u),a()},n=self.webpackChunkkairosv2=self.webpackChunkkairosv2||[];function s(){for(var a,r=0;r<t.length;r++){for(var n=t[r],s=!0,i=1;i<n.length;i++){var c=n[i];0!==e[c]&&(s=!1)}s&&(t.splice(r--,1),a=o(o.s=n[0]))}return 0===t.length&&(o.x(),o.x=e=>{}),a}n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n));var i=o.x;o.x=()=>(o.x=i||(e=>{}),(a=s)())})(),o.x()})()}));
//# sourceMappingURL=despachos.js.map